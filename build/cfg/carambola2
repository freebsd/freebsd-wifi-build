# Base configuration
X_BUILD_BASE_CFG="mips_ap"

# board configuration
KERNCONF=CARAMBOLA2

# XXX needs to be a multiple of the blocksize (512 bytes) ?
X_FSSIZE="2818048"

# The configuration load/save script needs to know the
# configuration partition name and location.
BIN_CFG_PARTITION="/dev/map/cfg"
BIN_CFG_SIZE="65536"

# Modules need to be included
MFSROOT_INC_MODULES="YES"
MFSROOT_INC_MODULE_LIST="if_vlan if_gif if_gre if_tap if_tun"
MFSROOT_INC_MODULE_LIST="${MFSROOT_INC_MODULE_LIST} if_otus otusfw_init otusfw_main"
MFSROOT_INC_MODULE_LIST="${MFSROOT_INC_MODULE_LIST} if_urtwn urtwn-rtl8188eufw urtwn-rtl8192cfwT urtwn-rtl8192cfwU"
MFSROOT_INC_MODULE_LIST="${MFSROOT_INC_MODULE_LIST} libalias ipfw ipfw_nat ipfw_nptv6"

# Netboot
NETBOOT_KERNEL="YES"

# Uboot stuff
UBOOT_ARCH="mips"
UBOOT_KERN_LOADADDR="0x80050000"
UBOOT_KERN_STARTADDR="0x80050100"

# Make a ulzma image
X_FSIMAGE_CMD="mkuzip"
# XXX this is so high right now in order to get this
# squeezed onto 4MB of flash. Sigh.
X_FSIMAGE_ARGS="-L -d -s 131072 -v"
X_FSIMAGE_SUFFIX=".ulzma"

# If no build options are provided, which build options
# should be run when building

# Building the firmware image
X_BUILD_BUILD_IMG_DEFAULTS="fetchpkgs mfsroot makepkgs addpkgs fsimage uboot"

# Build a contiguous flash image
X_UBOOT_KERNROOTIMG="YES"

# Configuration file overrides
X_CFG_DEFAULT_ETHER="arge1"
X_CFG_DEFAULT_HOSTNAME="freebsd-carambola2"

X_PACKAGELIST="dropbear dnsmasq lua lzo2 openvpn"

TARGET_CROSS_TOOLCHAIN="mips-gcc"
